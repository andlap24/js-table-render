var _parcelHelpers = require("@parcel/transformer-js/lib/esmodule-helpers.js");
_parcelHelpers.defineInteropFlag(exports);
_parcelHelpers.export(exports, "initPosts", function () {
  return initPosts;
});
var _apiApi = require('../api/api');
async function initPosts() {
  try {
    const posts = await getPosts();
    if (posts) {
      return renderPosts(posts, '#posts');
    } else {
      throw new Error('Error getting posts');
    }
  } catch (err) {
    // eslint-disable-next-line no-console
    console.log(err);
  }
}
function renderPosts(posts, parentContainerSelector = '#posts') {
  const container = document.querySelector(parentContainerSelector);
  if (container) {
    let postHtml = '';
    posts.forEach(post => {
      postHtml += `
      <div class="posts__post post">
        <h3 class="post__title">${post.title}</h3>
        <p class="post__text">${post.body}</p>
      </div>`;
    });
    container.innerHTML += postHtml;
  }
}
async function getPosts(startIndex = 0, lastIndex = 20) {
  try {
    const posts = await _apiApi.getDataFromServer('posts', startIndex, lastIndex);
    return posts;
  } catch (err) {
    // eslint-disable-next-line no-console
    console.log(err);
    throw new Error('Error while getting posts from server');
  }
}
